@model CreateNewItem
@{
    ViewData["Title"] = "Picture Time";
}
@{

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>@ViewData["Title"] - Network Configurations&trade;</title>
        <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="~/css/site.css" />
    </head>
    <body>
        <div class="container-fluid">
            <div class="card border-0 shadow my-5">
                <div class="card-body p-5 form-group">
                    <h1 class="font-weight-light text-center">Welcome to Network Configurations&trade;</h1>
                    <h5 class="font-weight-light text-center">@ViewBag.Error</h5>
                    <hr />
                    <form method="post" enctype="multipart/form-data">
                        <div id="uploadSection">
                            <div class="mb-3">
                                <label for="formFile" class="form-label">Been here before? Choose your previous picture.</label>
                                <input class="form-control btn-outline-info" type="file" name="file" id="formFile">
                            </div>
                        </div>
                        <div id="container">
                            <video autoplay="autoplay" id="videoElement">
                            </video>
                        </div>
                        <div class="form-group text-center">
                            <button class="btn btn-outline-info" formmethod="post" type="submit">Complete</button>
                        </div>
                        @section Scripts {
                            <script>
                                $('.custom-file-input').change(function () {
                                    var filename = $(this).val().split('\\').pop();
                                    $(this).next('.custom-file-label').html(filename);
                                });

                                var video = document.querySelector("#videoElement");

                                if (navigator.mediaDevices.getUserMedia) {
                                    navigator.mediaDevices.getUserMedia({ video = true })
                                        .then(function (stream) {
                                            video.srcObject = stream;
                                        })
                                        .catch(function (err0r) {
                                            console.log("Something went wrong!");
                                        });
                                }

                                function stop(e) {
                                    var stream = video.srcObject;
                                    var tracks = stream.getTracks();

                                    for (var i = 0; i < tracks.length; i++) {
                                        var track = tracks[i];
                                        track.stop();
                                    }

                                    video.srcObject = null;
                                }
                            </script>

                        }
                    </form>
                </div>
            </div>
        </div>
    </body>
</html>
}

